// RUN: %locic %s --interpret > %t
// RUN: FileCheck < %t %s

// CHECK: main: Value = 1.
// CHECK: main: Value = 11.
// CHECK: main: Value = 111.
// CHECK: main: Value ref = 111.
// CHECK: main: Value = 1111, Value ref = 1111.
// CHECK: main: Value = 1111.

import void printf(const ubyte * str, ...);

export int main(unused int argc, unused ubyte ** argv) {
	int value = 1;
	
	printf(C"main: Value = %d.\n", value);
	
	lval<int> auto& valueLvalRef1 = value;
	valueLvalRef1 = 11;
	
	printf(C"main: Value = %d.\n", value);
	
	lval<auto> auto& valueLvalRef2 = value;
	valueLvalRef2 = 111;
	
	printf(C"main: Value = %d.\n", value);
	
	auto& valueRef = value;
	
	printf(C"main: Value ref = %d.\n", valueRef);
	
	valueLvalRef1 = 1111;
	
	printf(C"main: Value = %d, Value ref = %d.\n", value, valueRef);
	
	auto valueCopy = value;
	valueCopy = 11111;
	
	printf(C"main: Value = %d.\n", value);
	
	return 0;
}

